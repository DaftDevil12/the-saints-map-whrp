<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>CONNECTING TO OFFSHORE ACCOUNT...</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&display=swap');
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: #000;
      color: #0f0;
      font-family: 'Courier Prime', monospace;
      height: 100vh;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Scanline effect */
    body::after {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(
        transparent 50%,
        rgba(0, 255, 0, 0.02) 50%
      );
      background-size: 100% 4px;
      animation: scanline 8s linear infinite;
      pointer-events: none;
      z-index: 100;
    }

    @keyframes scanline {
      0% { transform: translateY(0); }
      100% { transform: translateY(100vh); }
    }

    .terminal {
      width: 90%;
      max-width: 800px;
      height: 80vh;
      overflow: hidden;
      position: relative;
    }

    .code-line {
      font-size: 13px;
      line-height: 1.5;
      white-space: pre;
      opacity: 0;
      animation: fadeIn 0.1s forwards;
    }

    @keyframes fadeIn {
      to { opacity: 1; }
    }

    .access-granted {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0);
      font-size: 60px;
      font-weight: bold;
      text-align: center;
      text-shadow: 
        0 0 10px #0f0,
        0 0 20px #0f0,
        0 0 30px #0f0,
        0 0 40px #0f0;
      animation: accessGranted 2s ease-out forwards;
      opacity: 0;
      z-index: 10;
    }

    @keyframes accessGranted {
      0% {
        transform: translate(-50%, -50%) scale(0);
        opacity: 0;
      }
      50% {
        transform: translate(-50%, -50%) scale(1.2);
        opacity: 1;
      }
      100% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
      }
    }

    .glitch {
      animation: glitch 500ms infinite;
    }

    @keyframes glitch {
      0% {
        text-shadow: 
          0.05em 0 0 rgba(255, 0, 0, 0.75),
          -0.025em -0.05em 0 rgba(0, 255, 0, 0.75),
          0.025em 0.05em 0 rgba(0, 0, 255, 0.75);
      }
      14% {
        text-shadow: 
          0.05em 0 0 rgba(255, 0, 0, 0.75),
          -0.025em -0.05em 0 rgba(0, 255, 0, 0.75),
          0.025em 0.05em 0 rgba(0, 0, 255, 0.75);
      }
      15% {
        text-shadow: 
          -0.05em -0.025em 0 rgba(255, 0, 0, 0.75),
          0.025em 0.025em 0 rgba(0, 255, 0, 0.75),
          -0.05em -0.05em 0 rgba(0, 0, 255, 0.75);
      }
      49% {
        text-shadow: 
          -0.05em -0.025em 0 rgba(255, 0, 0, 0.75),
          0.025em 0.025em 0 rgba(0, 255, 0, 0.75),
          -0.05em -0.05em 0 rgba(0, 0, 255, 0.75);
      }
      50% {
        text-shadow: 
          0.025em 0.05em 0 rgba(255, 0, 0, 0.75),
          0.05em 0 0 rgba(0, 255, 0, 0.75),
          0 -0.05em 0 rgba(0, 0, 255, 0.75);
      }
      99% {
        text-shadow: 
          0.025em 0.05em 0 rgba(255, 0, 0, 0.75),
          0.05em 0 0 rgba(0, 255, 0, 0.75),
          0 -0.05em 0 rgba(0, 0, 255, 0.75);
      }
      100% {
        text-shadow: 
          -0.025em 0 0 rgba(255, 0, 0, 0.75),
          -0.025em -0.025em 0 rgba(0, 255, 0, 0.75),
          -0.025em -0.05em 0 rgba(0, 0, 255, 0.75);
      }
    }

    .fade-out {
      animation: fadeOut 1s forwards;
    }

    @keyframes fadeOut {
      to { opacity: 0; }
    }
  </style>
</head>
<body>
  <div class="terminal" id="terminal"></div>
  <div class="access-granted" id="access-msg" style="display: none;">
    <div class="glitch">CONNECTION</div>
    <div class="glitch" style="color: #ff0;">ESTABLISHED</div>
  </div>

  <script>
    const terminal = document.getElementById('terminal');
    const accessMsg = document.getElementById('access-msg');

    // Get username from localStorage
    const raw = localStorage.getItem("saintsUser");
    let username = "UNKNOWN";
    if (raw) {
      try {
        const user = JSON.parse(raw);
        username = user.username.toUpperCase();
      } catch (e) {}
    }

    const codeLines = [
      '> INITIATING SECURE FINANCIAL CONNECTION...',
      '> ESTABLISHING VPN TUNNEL...',
      '[OK] VPN tunnel active: NODE_CH_ZURICH_03',
      '',
      '> CONNECTING TO OFFSHORE BANKING NETWORK...',
      '[INFO] Target: Cayman Islands Financial Authority',
      '[INFO] Bank Code: CIFS-2847-SAINTS',
      '[INFO] Routing through proxy servers...',
      '[INFO] Proxy 1: 185.220.101.67 (Switzerland)',
      '[INFO] Proxy 2: 103.253.145.28 (Singapore)',
      '[INFO] Proxy 3: 192.42.116.180 (Cayman Islands)',
      '[OK] Multi-layer routing established',
      '',
      '> AUTHENTICATING WITH OFFSHORE BANK...',
      `[INFO] Account holder: ${username}`,
      '[INFO] Sending encrypted credentials...',
      '[INFO] 4096-bit RSA handshake in progress...',
      '[OK] Bank authentication successful',
      '',
      '> REQUESTING ACCOUNT ACCESS...',
      '[INFO] Account number: ████████████',
      '[INFO] Verifying transaction permissions...',
      '[INFO] Checking regulatory compliance...',
      '[OK] Full account access granted',
      '',
      '> ESTABLISHING SECURE DATA CHANNEL...',
      '[INFO] Initializing TLS 1.3 encryption...',
      '[INFO] Certificate validation complete',
      '[INFO] Cipher suite: TLS_AES_256_GCM_SHA384',
      '[OK] Encrypted channel active',
      '',
      '> SYNCHRONIZING FINANCIAL DATA...',
      '[INFO] Downloading transaction history...',
      '[INFO] Loading account balances...',
      '[INFO] Fetching pending operations...',
      '[OK] Data synchronized',
      '',
      '> ACTIVATING ANTI-FORENSICS PROTOCOLS...',
      '[INFO] Clearing connection logs...',
      '[INFO] Randomizing session identifiers...',
      '[INFO] Enabling auto-disconnect on idle...',
      '[OK] Security measures active',
      '',
      '> OFFSHORE ACCOUNT ACCESS READY',
      '> LOADING FINANCIAL LEDGER...',
      ''
    ];

    let lineIndex = 0;
    let charIndex = 0;
    let currentLine = '';

    function typeCode() {
      if (lineIndex >= codeLines.length) {
        // Show CONNECTION ESTABLISHED message
        setTimeout(() => {
          terminal.classList.add('fade-out');
          accessMsg.style.display = 'block';
          
          // Redirect to finances.html after 2 seconds
          setTimeout(() => {
            window.location.href = 'finances.html';
          }, 2000);
        }, 500);
        return;
      }

      const line = codeLines[lineIndex];
      
      if (charIndex < line.length) {
        currentLine += line[charIndex];
        charIndex++;
        
        // Update current line
        const lines = terminal.querySelectorAll('.code-line');
        if (lines.length > 0) {
          lines[lines.length - 1].textContent = currentLine;
        }
        
        // Random speed for typing effect
        const speed = Math.random() * 20 + 5;
        setTimeout(typeCode, speed);
      } else {
        // Line complete, move to next
        lineIndex++;
        charIndex = 0;
        currentLine = '';
        
        // Add new line
        const newLine = document.createElement('div');
        newLine.className = 'code-line';
        terminal.appendChild(newLine);
        
        // Auto-scroll
        terminal.scrollTop = terminal.scrollHeight;
        
        // Pause between lines
        setTimeout(typeCode, Math.random() * 100 + 50);
      }
    }

    // Start the animation
    const firstLine = document.createElement('div');
    firstLine.className = 'code-line';
    terminal.appendChild(firstLine);
    
    setTimeout(typeCode, 500);
  </script>
</body>
</html>
